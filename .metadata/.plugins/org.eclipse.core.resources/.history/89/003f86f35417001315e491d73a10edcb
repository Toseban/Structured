package com.toseban.structured;

import com.viewpagerindicator.PageIndicator;
import com.viewpagerindicator.TitlePageIndicator;

import android.os.Bundle;
import android.app.Activity;
import android.content.res.Resources;
import android.graphics.drawable.Drawable;
import android.view.Menu;
import android.widget.ListView;
import android.support.v4.app.ActionBarDrawerToggle;
import android.support.v4.view.ViewPager;
import android.support.v4.widget.DrawerLayout;
import android.support.v7.app.ActionBar;
import android.support.v7.app.ActionBarActivity;

public class Timetable extends ActionBarActivity {

	DayviewFragmentAdapter myAdapter;
	ViewPager myPager;
	PageIndicator myIndicator;

	private DrawerLayout myDrawerLayout;
	private ListView myDrawerList;
	private ActionBarDrawerToggle myDrawerToggle;

	private CharSequence myDrawerTitle;
	private CharSequence myTitle;
	private String[] myDrawerFragmentTitles;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.timetable);

		dayviewFragmentSetUp();
		actionBarSetUp();
		navigationDrawerSetUp();

	}

	private void navigationDrawerSetUp() {
		// TODO Auto-generated method stub
		myTitle = myDrawerTitle = getTitle();
		myDrawerFragmentTitles = getResources().getStringArray(
				R.array.drawer_fragment_titles_array);
		myDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);
		myDrawerList = (ListView) findViewById(R.id.left_drawer);
		myDrawerLayout.setDrawerShadow(R.drawable, gravity)
	}

	private void actionBarSetUp() {
		// TODO Auto-generated method stub
		ActionBar actionBar = getSupportActionBar();
		actionBar.setLogo(R.drawable.png_structured);
		Resources res = getResources();
		Drawable actionbarBackground = res
				.getDrawable(R.drawable.actionbar_background);
		actionBar.setBackgroundDrawable(actionbarBackground);
		actionBar.setTitle(R.string.timetable_activity_title);
		actionBar.show();
	}

	private void dayviewFragmentSetUp() {
		// TODO Auto-generated method stub
		myAdapter = new DayviewFragmentAdapter(getSupportFragmentManager());
		myPager = (ViewPager) findViewById(R.id.pager);
		myPager.setAdapter(myAdapter);
		myIndicator = (TitlePageIndicator) findViewById(R.id.indicator);
		myIndicator.setViewPager(myPager);
	}

	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		// Inflate the menu; this adds items to the action bar if it is present.
		getMenuInflater().inflate(R.menu.timetable, menu);
		return true;
	}

}
